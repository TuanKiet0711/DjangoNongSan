{% extends "shop/admin/base_admin.html" %}
{% block title %}S·ª≠a ƒë∆°n h√†ng{% endblock %}
{% block content %}
<div class="card shadow-lg border-0 rounded-3">
  <div class="card-body p-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h4 class="mb-0 fw-semibold text-success">üõí C·∫≠p nh·∫≠t ƒë∆°n h√†ng</h4>
      <span class="text-muted small">
        M√£ ƒë∆°n: <strong>{{ id|slice:"-6:"|upper }}</strong>
      </span>
    </div>

    <form method="post" class="needs-validation" novalidate>
      {% csrf_token %}

      <!-- Tr·∫°ng th√°i v√† t·ªïng quan -->
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label fw-semibold">Tr·∫°ng th√°i</label>
          <select name="trangThai" class="form-select rounded-pill shadow-sm">
            {% for val,label in status_choices %}
              <option value="{{ val }}" {% if val == cur_status %}selected{% endif %}>
                {{ label }}
              </option>
            {% endfor %}
          </select>
        </div>
        <div class="col-md-4">
          <label class="form-label fw-semibold">Ph∆∞∆°ng th·ª©c thanh to√°n</label>
          <input class="form-control rounded-pill shadow-sm" value="{{ pttt_label }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label fw-semibold">T·ªïng ti·ªÅn</label>
          <input class="form-control text-end rounded-pill shadow-sm fw-bold text-success" 
                 value="{{ tongTienFmt }} ƒë" disabled>
        </div>
      </div>

      <hr class="my-4"/>

      <!-- Th√¥ng tin giao h√†ng -->
      <h5 class="fw-bold text-primary mb-3">üöö Th√¥ng tin giao h√†ng</h5>
      <div class="row g-3">
        <div class="col-md-4">
          <label class="form-label">H·ªç t√™n</label>
          <input class="form-control shadow-sm" value="{{ ship.hoTen }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
          <input class="form-control shadow-sm" value="{{ ship.soDienThoai }}" disabled>
        </div>
        <div class="col-md-4">
          <label class="form-label">Ng√†y giao</label>
          <input class="form-control shadow-sm" value="{{ ship.ngayGiao }}" disabled>
        </div>
        <div class="col-12">
          <label class="form-label">ƒê·ªãa ch·ªâ</label>
          <input class="form-control shadow-sm" value="{{ ship.diaChi }}" disabled>
        </div>
        <div class="col-12">
          <label class="form-label">Ghi ch√∫</label>
          <textarea class="form-control shadow-sm" rows="2" disabled>{{ ship.ghiChu }}</textarea>
        </div>
      </div>

      <hr class="my-4"/>

      <!-- S·∫£n ph·∫©m -->
      <h5 class="fw-bold text-primary mb-3">üì¶ S·∫£n ph·∫©m trong ƒë∆°n</h5>
      <div class="table-responsive">
        <table class="table table-hover align-middle shadow-sm rounded-3">
          <thead class="table-light">
            <tr>
              <th class="ps-3">T√™n s·∫£n ph·∫©m</th>
              <th class="text-end" style="width:14%">ƒê∆°n gi√°</th>
              <th class="text-end" style="width:10%">SL</th>
              <th class="text-end" style="width:16%">Th√†nh ti·ªÅn</th>
            </tr>
          </thead>
          <tbody>
            {% for it in items %}
            <tr>
              <td class="ps-3">{{ it.ten }}</td>
              <td class="text-end">{{ it.donGiaFmt }} ƒë</td>
              <td class="text-end">{{ it.soLuong }}</td>
              <td class="text-end fw-semibold text-success">{{ it.thanhTienFmt }} ƒë</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="4" class="text-center text-muted py-3">Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o trong ƒë∆°n.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="mt-4 d-flex justify-content-end gap-3">
        <a href="{% url 'shop:admin_orders' %}" class="btn btn-outline-secondary rounded-pill px-4">
          H·ªßy
        </a>
        <button type="submit" 
                class="btn btn-success rounded-pill px-4 fw-semibold shadow-sm"
                style="background:linear-gradient(90deg,#2ecc71,#27ae60)">
          üíæ L∆∞u thay ƒë·ªïi
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
